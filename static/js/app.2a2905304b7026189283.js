webpackJsonp([2,0],[function(t,e,n){"use strict";function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}var r=n(41),s=i(r),o=n(35),u=i(o),c=n(39),l=i(c),d=n(76),f=i(d),p=n(179),m=n(75),v=a(m),h=n(152),y=i(h);(0,s.default)(v).forEach(function(t){u.default.filter(t,v[t])});var g=u.default.util.extend({router:f.default,store:l.default},y.default),b=new u.default(g);(0,p.sync)(l.default,f.default),b.$mount("#app")},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(){return d.default.auth().currentUser}function r(){return d.default.auth().signOut()}Object.defineProperty(e,"__esModule",{value:!0}),e.updateProfile=e.updatePhone=e.updateEmail=e.loginByEmail=e.login=e.createUser=void 0;var s=n(44),o=a(s),u=n(42),c=a(u);e.createUser=function(){var t=(0,c.default)(o.default.mark(function t(e,n){var a,i;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.default.auth().createUserWithPhoneAndPassword(e,n);case 2:return a=d.default.auth().currentUser,i=""+a.uid,t.next=6,p.default.child("user/"+i).set({phone:e});case 6:return console.log("createUser:",e),t.abrupt("return",a);case 8:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),e.login=function(){var t=(0,c.default)(o.default.mark(function t(e,n){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d.default.auth().signInWithPhoneAndPassword(e,n));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),e.loginByEmail=function(){var t=(0,c.default)(o.default.mark(function t(e,n){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d.default.auth().signInWithEmailAndPassword(e,n));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),e.updateEmail=function(){var t=(0,c.default)(o.default.mark(function t(e){var n,a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.default.auth().currentUser,t.next=3,n.updateEmail(e);case 3:return a=""+n.uid,t.next=6,p.default.child("user/"+a).update({email:e});case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.updatePhone=function(){var t=(0,c.default)(o.default.mark(function t(e){var n,a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.default.auth().currentUser,t.next=3,n.updatePhone(e);case 3:return a=""+n.uid,t.next=6,p.default.child("user/"+a).update({phone:e});case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.updateProfile=function(){var t=(0,c.default)(o.default.mark(function t(e,n){var a,i,r;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={displayName:e,photoURL:n},i=d.default.auth().currentUser,r=""+i.uid,t.next=5,p.default.child("user/"+r).update(a);case 5:return t.next=7,i.updateProfile(a);case 7:return t.abrupt("return",i);case 8:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}();e.curUser=i,e.logout=r;var l=n(36),d=a(l),f=n(37),p=a(f)},,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(36),r=a(i),s=n(140),o=a(s),u={authDomain:"books.wilddog.com",syncURL:"https://books.wilddogio.com/v2"};r.default.initializeApp(u);var c=r.default.sync().ref();c.cachedItems=(0,o.default)({max:1e3,maxAge:9e5}),c.cachedIds={},e.default=c},function(t,e,n){"use strict";function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=_.default.child(t+"-books"),a=function(t){e(t.val())};return n.on("value",a),function(){n.off("value",a)}}function s(t){return d("item/"+t)}function o(t){return g.default.all(t.map(function(t){return s(t)}))}function u(t){return d("user/"+t)}function c(t){return _.default.cachedIds&&_.default.cachedIds[t]?g.default.resolve(_.default.cachedIds[t]):d(t+"-books")}function l(){var t=_.default.cachedItems.dump();t.forEach(function(t){console.log(t)},this)}function d(t){var e=_.default.cachedItems;if(e&&e.has(t)){var n=e.get(t);return g.default.resolve(n)}return new g.default(function(n,a){_.default.child(t).once("value",function(a){var i=a.val();i&&(i.__lastUpdated=Date.now()),e&&e.set(t,i),n(i)},a)})}function f(){return new g.default(function(t,e){_.default.child("maxid").transaction(function(t){var e=(t||0)+1;return e}).then(function(n){if(n.committed){var a=n.snapshot.val();_.default.child("maxid").set(a),t(a)}else e("bad next id")})})}Object.defineProperty(e,"__esModule",{value:!0}),e.updateTop=e.likeItem=e.getMyBooks=e.addItem=void 0;var p=n(44),m=i(p),v=n(42),h=i(v),y=n(21),g=i(y);e.addItem=function(){var t=(0,h.default)(m.default.mark(function t(e){var n,a,i,r,o,c,l,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return m.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:return n=t.sent,e.id=n,a=P.curUser().uid,t.next=7,u(a);case 7:return i=t.sent,e.uid=a,e.by=i.displayName,e.type=d>0?"comment":"book",d>0&&(e.parent=d),r="item/"+n,t.next=15,_.default.child(r).set(e);case 15:if(!(d>0)){t.next=24;break}return t.next=18,s(d);case 18:return o=t.sent,o.kids=o.kids||[],o.kids.unshift(n),c="item/"+d,t.next=24,_.default.child(c+"/kids").set(o.kids);case 24:if("book"!==e.type){t.next=36;break}return l=_.default.cachedIds.new||[],l.unshift(n),t.next=29,_.default.child("new-books").set(l);case 29:return _.default.cachedIds.new=l,i.books=i.books||[],i.books.unshift(n),t.next=34,_.default.child("user/"+a+"/books").set(i.books);case 34:t.next=40;break;case 36:return i.comments=i.comments||[],i.comments.unshift(n),t.next=40,_.default.child("user/"+a+"/comments").set(i.comments);case 40:return t.abrupt("return",e);case 41:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),e.getMyBooks=function(){var t=(0,h.default)(m.default.mark(function t(){var e,n;return m.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=P.curUser(),t.next=3,u(e.uid);case 3:return e=t.sent,n=e.books||[],console.log("getMyBooks",n.length),t.next=8,g.default.all(n.map(function(t){return s(t)}));case 8:return n=t.sent,t.abrupt("return",n);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.likeItem=function(){var t=(0,h.default)(m.default.mark(function t(e){var n,a,i,r,s;return m.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(P.curUser().uid);case 2:if(n=t.sent,a=P.curUser().uid,n.likes=n.likes||[],i=n.likes.find(function(t){return t===e})){t.next=14;break}return t.next=9,_.default.child("item/"+e+"/score").transaction(function(t){var e=(t||0)+1;return e});case 9:return r=t.sent,s=r.snapshot.val(),n.likes.unshift(e),t.next=14,_.default.child("user/"+a+"/likes").set(n.likes);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.updateTop=function(){var t=(0,h.default)(m.default.mark(function t(){var e,n;return m.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=_.default._tops,n=e.length,n>30&&(n=30,e.slice(0,n)),_.default.child("top-books").set(e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();e.watchList=r,e.fetchItem=s,e.fetchItems=o,e.fetchUser=u,e.fetchIdsByType=c,e.debug=l;var b=n(37),_=i(b),C=n(20),P=a(C),k=n(36);i(k)},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(35),r=a(i),s=n(3),o=a(s),u=n(180),c=a(u),l=n(77),d=a(l),f=n(78),p=a(f);r.default.use(o.default);var m=!1;e.default=new o.default.Store({modules:{app:d.default,books:p.default},strict:m,plugins:m?[(0,c.default)()]:[]})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.APP_LOADING="APP_LOADING",e.APP_LOADED="APP_LOADED",e.APP_NOTIFY="APP_NOTIFY",e.APP_LOGGEDIN="APP_LOGGEDIN",e.APP_LOGOUT="APP_LOGOUT",e.CHANGE_PROFILE="CHANGE_PROFILE",e.SET_MYBOOKS="SET_MYBOOKS",e.SET_ACTIVE_TYPE="SET_ACTIVE_TYPE",e.SET_LIST="SET_LIST",e.SET_ITEMS="SET_ITEMS",e.SET_USER="SET_USER"},,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=n.p+"static/img/turnkey.d0421b3.png"},,,,function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(154),s=a(r),o=n(156),u=a(o);e.default={name:"app",components:{AppMenu:s.default,Notify:u.default},computed:(0,i.mapGetters)(["authenticated","me","notifyType"])}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=a(i),s=n(3);e.default={data:function(){return{title:"",keywords:"",text:""}},methods:(0,r.default)({},(0,s.mapActions)(["addItem"]),{save:function(){this.addItem({title:this.title,keywords:this.keywords,text:this.text}),$("#newbook").dimmer("show")}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(3);e.default={computed:(0,a.mapGetters)(["authenticated","me"])}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(41),r=a(i);e.default={replace:!0,props:{data:Array,columns:Array,filterKey:String},data:function(){var t={};return this.columns.forEach(function(e){t[e]=1}),{sortKey:"",sortOrders:t}},computed:{filteredData:function(){var t=this.sortKey,e=this.filterKey&&this.filterKey.toLowerCase(),n=this.sortOrders[t]||1,a=this.data;return e&&(a=a.filter(function(t){return(0,r.default)(t).some(function(n){return String(t[n]).toLowerCase().indexOf(e)>-1})})),t&&(a=a.slice().sort(function(e,a){return e=e[t],a=a[t],(e===a?0:e>a?1:-1)*n})),a}},filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=this.sortOrders[t]*-1}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(3);e.default={name:"notify",computed:(0,a.mapGetters)({loading:"loading",notify:"notifyMsg",me:"me"})}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=a(i),s=n(3);e.default={data:function(){return{displayName:"",phone:"",email:"",photoURL:""}},methods:(0,r.default)({},(0,s.mapActions)(["updateProfile"]),{save:function(){this.updateProfile({displayName:this.displayName,phone:this.phone,email:this.email,photoURL:this.photoURL})}}),computed:(0,r.default)({},(0,s.mapGetters)(["me"]),{PhotoURL:function(){return"/static/images/"+this.photoURL}}),created:function(){this.displayName=this.me.displayName,this.phone=this.me.phone,this.email=this.me.email,this.photoURL=this.me.photoURL||"av.png",$("#avatar").dropdown()}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={methods:{list:function(){this.$router.push("home")}}}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=a(i),s=n(3);e.default={data:function(){return{mobile:"13640327787",pass:"123456"}},mounted:function(){$(".ui.form").form({on:"blur",fields:{mobile:{identifier:"mobile",rules:[{type:"regExp[/^[0-9]{11,11}$/]",prompt:"请输入11位手机号"}]},password:{identifier:"password",rules:[{type:"minLength[6]",prompt:"密码需要6位以上字母或数字"},{type:"maxLength[32]",prompt:"密码不得超过32位字母或数字"}]}}})},methods:(0,r.default)({login2:function(){var t=this,e=$(".form").form("validate form");if(e){var n=this;n.beginLoad(),n.login({mobile:this.mobile,pass:this.pass,cb:function(e){n.afterLoad();var a={};return e?(a.type="info",a.notify="欢迎您："+e.displayName,n.notify(a),void t.$router.replace(t.$route.query.redirect||"/me")):(a.type="error",a.notify="请检查手机号及密码是否正确！",void n.notify(a))}})}}},(0,s.mapActions)(["beginLoad","afterLoad","login","notify"]))}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=a(i),s=n(3),o=n(153),u=a(o),c=n(155),l=a(c);e.default={components:{AddBook:u.default,MyGrid:l.default},data:function(){return{searchQuery:"",gridColumns:["title","keywords"]}},methods:(0,r.default)({},(0,s.mapActions)(["getMyBooks"]),{left:function(){$(".shape").shape("flip left")},right:function(){$(".shape").shape("flip right")}}),computed:(0,s.mapGetters)(["mybooks"]),mounted:function(){$(".ui.accordion").accordion(),$(".tabular.menu .item").tab(),$(".ui.shape").shape(),this.getMyBooks();var t=$(".direction .button"),e={rotate:function(){var t=$(this).closest(".example").find(".ui.shape"),e=$(this).data("direction")||!1,n=$(this).data("animation")||!1;e&&n&&t.shape(n+" "+e)}};t.on("click",e.rotate).popup({delay:0,position:"bottom center"})}}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=a(i),s=n(3);e.default={data:function(){return{mobile:"13640327787",pass:"123456"}},mounted:function(){$(".ui.form").form({on:"blur",fields:{mobile:{identifier:"mobile",rules:[{type:"regExp[/^[0-9]{11,11}$/]",prompt:"请输入11位手机号"}]},password:{identifier:"password",rules:[{type:"minLength[6]",prompt:"密码需要6位以上字母或数字"},{type:"maxLength[32]",prompt:"密码不得超过32位字母或数字"}]}}})},methods:(0,r.default)({check:function(){var t=this,e=$(".form").form("validate form");if(e){var n=this;n.beginLoad();var a={};n.register({mobile:this.mobile,pass:this.pass}).then(function(e){n.afterLoad(),t.$router.replace("/login")}).catch(function(t){n.afterLoad(),console.log(t),a.type="error",a.notify="手机号错误或者改号已经被注册！",n.notify(a)})}}},(0,s.mapActions)(["beginLoad","afterLoad","register","notify"]))}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(157),s=a(r);e.default={name:"user-view",components:{UserEdit:s.default},computed:(0,i.mapGetters)(["me"]),mounted:function(){$(".ui.accordion").accordion()}}},function(t,e){"use strict";function n(t){var e=t.replace(/^https?:\/\//,"").replace(/\/.*$/,""),n=e.split(".").slice(-3);return"www"===n[0]&&n.shift(),n.join(".")}function a(t){var e=Date.now()/1e3-Number(t);return e<3600?i(~~(e/60)," 分钟"):e<86400?i(~~(e/3600)," 小时"):e<2592e3?i(~~(e/86400),"天"):e<94608e4?i(~~(e/2592e3),"月"):i(~~(e/94608e4),"年")}function i(t,e){return t+e}function r(t,e,n){if(t=parseFloat(t),!isFinite(t)||!t&&0!==t)return"";e=null!=e?e:"$",n=null!=n?n:2;var a=Math.abs(t).toFixed(n),i=n?a.slice(0,-1-n):a,r=i.length%3,o=r>0?i.slice(0,r)+(i.length>3?",":""):"",u=n?a.slice(-1-n):"",c=t<0?"-":"";return c+e+o+i.slice(r).replace(s,"$1,")+u}Object.defineProperty(e,"__esModule",{value:!0}),e.host=n,e.timeAgo=a,e.currency=r;var s=/(\d{3})(?=\d)/g},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){l.default.state.app.me.authenticated?n():n({path:"/login",query:{redirect:t.fullPath}})}Object.defineProperty(e,"__esModule",{value:!0});var r=n(35),s=a(r),o=n(178),u=a(o),c=n(39),l=a(c),d=n(158),f=a(d),p=n(159),m=a(p),v=n(162),h=a(v),y=n(163),g=a(y),b=n(161),_=a(b),C=n(164),P=a(C),k=n(160),x=a(k);s.default.use(u.default);var w=new u.default({mode:"history",linkActiveClass:"active",scrollBehavior:function(){return{y:0}},routes:[{name:"home",path:"/home",component:f.default},{name:"me",path:"/me",component:P.default,children:[{path:"books",component:x.default}]},{path:"/login",component:m.default},{path:"/register",component:h.default},{path:"/top",component:g.default,beforeEnter:i},{path:"/new",component:_.default},{path:"/logout",beforeEnter:function(t,e,n){l.default.dispatch("logout"),n("/home")}},{path:"*",redirect:"/home"}]});e.default=w},function(t,e,n){"use strict";function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(43),o=i(s),u=n(40),c=a(u),l=n(38),d=a(l),f=n(20),p=a(f),m={loading:!1,type:"info",notify:"＝＝＝请登录＝＝＝",me:{authenticated:!1,info:{},books:[]}},v={loading:function(t){return t.loading},notifyType:function(t){return t.type},notifyMsg:function(t){return t.notify},authenticated:function(t){return t.me.authenticated},me:function(t){return t.me.info||{}},mybooks:function(t){return t.me.books||{}}},h={beginLoad:function(t){var e=t.commit;e(c.APP_LOADING)},afterLoad:function(t){var e=t.commit;e(c.APP_LOADED)},notify:function(t,e){var n=t.commit;n(c.APP_NOTIFY,e)},login:function(t,e){var n=t.commit,a=e.mobile,i=e.pass,r=e.cb;p.login(a,i).then(function(t){n(c.APP_LOGGEDIN,t),r(t)}).catch(function(t){n(c.APP_NOTIFY,{type:"error",notify:"登录失败，请检查手机号或密码是否正确！"}),console.log("login ERR",a),r(null)})},logout:function(t){var e=t.commit;p.logout().then(function(){e(c.APP_LOGOUT)})},register:function(t,e){var n=(t.commit,e.mobile),a=e.pass;return p.createUser(n,a)},updateProfile:function(t,e){var n=t.commit,a=t.getters,i=a.me;i.email!=e.email&&p.updateEmail(e.email),p.updateProfile(e.displayName,e.photoURL),n(c.CHANGE_PROFILE)},addItem:function(t,e){var n=(t.commit,t.dispatch),a=t.getters,i=(a.me,e.parent||0);d.addItem(e,i).then(function(){n("getMyBooks")})},getMyBooks:function(t){var e=t.commit;d.getMyBooks().then(function(t){e(c.SET_MYBOOKS,{books:t})})}},y=(r={},(0,o.default)(r,c.SET_MYBOOKS,function(t,e){var n=e.books;t.me.books=n}),(0,o.default)(r,c.CHANGE_PROFILE,function(t,e){t.me.info=e}),(0,o.default)(r,c.APP_LOADING,function(t){t.loading=!0,t.type="info",t.notify="加载中..."}),(0,o.default)(r,c.APP_LOADED,function(t){t.loading=!1,t.type="info",t.notify=""}),(0,o.default)(r,c.APP_NOTIFY,function(t,e){var n=e.type,a=e.notify;t.type=n,t.notify=a}),(0,o.default)(r,c.APP_LOGGEDIN,function(t,e){t.me.authenticated=!0,t.me.info={phone:e.phone,email:e.email,displayName:e.displayName,photoURL:e.photoURL,uid:e.uid},t.type="info",t.notify="欢迎您："+e.displayName}),(0,o.default)(r,c.APP_LOGOUT,function(t,e){t.me.authenticated=!1,t.me.info={},t.type="info",t.notify="＝＝＝请登录＝＝＝"}),r);e.default={state:m,getters:v,actions:h,mutations:y}},function(t,e,n){"use strict";function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r,s=n(43),o=i(s),u=n(21),c=i(u),l=n(38),d=a(l),f=(n(20),n(40)),p=a(f),m={activeType:null,itemsPerPage:9,items:{},users:{},lists:{top_books:[],new_books:[]}},v={watchList:function(t,e){var n=(t.commit,t.dispatch,e.cb);return d.watchList((void 0).type,n)},fetchListData:function(t,e){var n=t.commit,a=t.dispatch,i=(t.state,e.type);return n(p.SET_ACTIVE_TYPE,{type:i}),d.fetchIdsByType(i).then(function(t){return n(p.SET_LIST,{type:i,ids:t})}).then(function(){return a("ensureActiveItems")})},ensureActiveItems:function(t){var e=t.dispatch,n=t.getters;return e("fetchItems",{ids:n.activeIds})},fetchItems:function(t,e){var n=t.commit,a=t.state,i=e.ids;return i=i.filter(function(t){return!a.items[t]}),i.length?d.fetchItems(i).then(function(t){return n(p.SET_ITEMS,{items:t})}):c.default.resolve()},fetchUser:function(t,e){var n=t.commit,a=t.state,i=e.id;return a.users[i]?c.default.resolve(a.users[i]):d.fetchUser(i).then(function(t){return n(p.SET_USER,{id:i,user:t})})}},h=(r={},(0,o.default)(r,p.SET_ACTIVE_TYPE,function(t,e){var n=e.type;t.activeType=n}),(0,o.default)(r,p.SET_LIST,function(t,e){var n=e.type,a=e.ids;t.lists[n]=a}),(0,o.default)(r,p.SET_ITEMS,function(t,e){var n=e.items;n.forEach(function(e){e&&Vue.set(t.items,e.id,e)})}),(0,o.default)(r,p.SET_USER,function(t,e){var n=e.id,a=e.user;Vue.set(t.users,n,a)}),r),y={activeType:function(t){return t.activeType},itemsPerPage:function(t){return t.itemsPerPage},lists:function(t){return t.lists},activeIds:function(t){var e=t.activeType,n=t.itemsPerPage,a=t.lists,i=Number(t.route.params.page)||1;if(e){var r=(i-1)*n,s=i*n;return a[e].slice(r,s)}return[]},activeItems:function(t,e){return e.activeIds.map(function(e){return t.items[e]}).filter(function(t){return t})}};e.default={state:m,getters:y,actions:v,mutations:h}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},,,,,,,,,,,,,,,,,,function(t,e,n){var a,i;a=n(64);var r=n(167);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i;a=n(65);var r=n(173);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i;a=n(66);var r=n(166);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i;n(134),a=n(67);var r=n(177);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i;a=n(68);var r=n(165);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i;a=n(69);var r=n(169);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i;n(133),a=n(70);var r=n(175);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i;a=n(71);var r=n(172);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i;a=n(72);var r=n(176);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i,r=n(171);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i;a=n(73);var r=n(170);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i,r=n(168);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e,n){var a,i;a=n(74);var r=n(174);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,t.exports=a},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",[e("div",{staticClass:"ui inline",class:t.loading?"loader active ":""}),"\n    "+t._s(t.notify)+"\n"])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"ui large secondary pointing menu",attrs:{"data-garbage":"true"}},[e("router-link",{staticClass:"item",attrs:{to:"/home"}},["关于"])," ",e("router-link",{staticClass:"item",attrs:{to:"/top"}},["最热"])," ",e("router-link",{staticClass:"item",attrs:{to:"/new"}},["最新"])," ",e("div",{staticClass:"right menu",attrs:{"data-garbage":"true"}},[t._m(0)," ",t.authenticated?e("router-link",{staticClass:"ui  button",attrs:{to:"/logout"}},["注销"]):t._e()," ",t.authenticated?t._e():e("router-link",{staticClass:"ui primary  button",attrs:{to:"/login"}},["登录"])])])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",{staticClass:"item"},[e("div",{staticClass:"ui transparent icon input"},[e("input",{attrs:{type:"text",placeholder:"Search..."}})," ",e("i",{staticClass:"search link icon"})])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"ui container"},[e("app-menu")," ",e("div",{staticClass:"ui raised segments"},[e("div",{staticClass:"ui segment"},[e("notify")])," ",e("div",{staticClass:"ui",class:t.authenticated?"green segment":"error"==t.notifyType?"red segment":"yellow segment"},[e("router-view")])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this;t.$createElement;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",[e("h1",{staticClass:"ui header"},["\n           TOP\n\n       "])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"ui form"},[e("div",{staticClass:"two fields"},[e("div",{staticClass:"field"},[e("label",["昵称"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.displayName,expression:"displayName"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:t._s(t.displayName)},on:{input:function(e){e.target.composing||(t.displayName=e.target.value)}}})])," "," ",e("div",{staticClass:"field"},[e("label",["电子邮件"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"email"},domProps:{value:t._s(t.email)},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])])," ",e("div",{staticClass:"three fields"},[e("img",{staticClass:"ui avatar image",attrs:{src:t.PhotoURL}})," ",e("div",{staticClass:"field"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.photoURL,expression:"photoURL"}],staticClass:"ui dropdown",attrs:{name:"photoIdx",id:"avatar"},on:{change:function(e){t.photoURL=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e})[0]}}},[e("option",{attrs:{value:"av.png"}},["请选择"])," ",e("option",{attrs:{value:"av-0.jpg"}},["IT男"])," ",e("option",{attrs:{value:"av-1.jpg"}},["经理男"])," ",e("option",{attrs:{value:"av-2.jpg"}},["时髦女"])])])," "," ",e("div",{staticClass:"ui  large  button",on:{click:function(e){t.save()}}},["保存"])," ",e("router-link",{staticClass:"ui  button",attrs:{to:"/me/books"}},["我的图书"])])])},staticRenderFns:[]}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"ui middle aligned center aligned grid"},[e("div",{staticClass:"column"},[t._m(0)," ",e("form",{staticClass:"ui large form"},[e("div",{staticClass:"ui  segment"},[e("div",{staticClass:"field"},[e("div",{staticClass:"ui left icon input"},[e("i",{staticClass:"user icon"})," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],attrs:{type:"text",name:"mobile",placeholder:"Phone number"},domProps:{value:t._s(t.mobile)},on:{input:function(e){e.target.composing||(t.mobile=e.target.value)}}})])])," ",e("div",{staticClass:"field"},[e("div",{staticClass:"ui left icon input"},[e("i",{staticClass:"lock icon"})," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t._s(t.pass)},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}})])])," ",e("div",{staticClass:"ui  large  button",on:{click:function(e){t.check()}}},["保存"])])," ",e("div",{staticClass:"ui error message"})])])])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("h2",{staticClass:"ui teal image header"},[e("img",{staticClass:"image",attrs:{src:n(60)}})," ",e("div",{staticClass:"content"},["\n        注册新用户\n      "])])}]}},function(t,e){t.exports={render:function(){var t=this;t.$createElement;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",[e("h1",{staticClass:"ui header"},["\n           NEW\n\n       "])])}]}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"ui middle aligned center aligned grid"},[e("div",{staticClass:"column"},[t._m(0)," ",t.$route.query.redirect?e("p",["\n      你要访问的内容有保护，请先登录系统！\n    "]):t._e()," ",e("form",{staticClass:"ui large form"},[e("div",{staticClass:"ui  segment"},[e("div",{staticClass:"field"},[e("div",{staticClass:"ui left icon input"},[e("i",{staticClass:"user icon"})," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],attrs:{type:"text",name:"mobile",placeholder:"Phone number"},domProps:{value:t._s(t.mobile)},on:{input:function(e){e.target.composing||(t.mobile=e.target.value)}}})])])," ",e("div",{staticClass:"field"},[e("div",{staticClass:"ui left icon input"},[e("i",{staticClass:"lock icon"})," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t._s(t.pass)},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}})])])," ",e("div",{staticClass:"ui  large  button",on:{click:function(e){t.login2()}}},["登录"])," ",e("router-link",{staticClass:"ui large button",attrs:{to:"/register"}},["注册"])])," ",e("div",{staticClass:"ui error message"})," ",e("div")])])])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("h2",{staticClass:"ui teal image header"},[e("img",{staticClass:"image",attrs:{src:n(60)}})," ",e("div",{staticClass:"content"},["\n        登录系统\n      "])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{attrs:{id:"newbook"}},[e("div",{staticClass:"ui form"},[e("div",{staticClass:"field"},[e("label",["标题"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"少于30个汉字"},domProps:{value:t._s(t.title)},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])," ",e("div",{staticClass:"field"},[e("label",["搜索关键字"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],attrs:{type:"text",placeholder:"5～8个关键字，空格或逗号分开"},domProps:{value:t._s(t.keywords)},on:{input:function(e){e.target.composing||(t.keywords=e.target.value)}}})])," ",e("div",{staticClass:"field"},[e("label",["内容介绍"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text",placeholder:'特殊用法:换行--<br>　图片引用--<img src="http://服务器地址/名称.后缀">'},domProps:{value:t._s(t.text)},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})])," ",e("div",{staticClass:"ui  large  button",on:{click:function(e){t.save()}}},["保存"])])," ",t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",{staticClass:"ui dimmer"},[e("div",{staticClass:"content"},[e("div",{staticClass:"center"},[e("h2",{staticClass:"ui inverted icon  header"},[e("i",{staticClass:"heart icon"})," 成功加入新图书!\n          "])])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;
return e("div",[e("div",{staticClass:"ui accordion"},[t._m(0)," ",e("div",{staticClass:"active content"},[e("user-edit")])])," ",e("router-view")])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",{staticClass:"active title"},[e("i",{staticClass:"dropdown icon"}),"\n         个人资料修改\n       "])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",[t._m(0)," ",e("div",{staticClass:"ui vertical masthead center aligned  segment"},[e("div",{staticClass:"ui text container"},[t._m(1)," ",t._m(2)," ",e("div",{staticClass:"ui huge primary button",on:{click:function(e){t.list()}}},["Get Started ",e("i",{staticClass:"right arrow icon"})])])])," ",t._m(3)])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",{staticClass:"ui vertical masthead inverted  segment"},[e("h5",{staticClass:"ui header"},["\n            我拥有一本已看完的《亲爱的安德烈》。",e("br")," 你--我的朋友，却不知道。\n            ",e("br")," 不知什么时候起，你迷上了这本书，费劲心思跑去图书馆借。\n            ",e("br")," 没借到，又去书店买.\n            ",e("br")," 如果你当初知道我有这本书，情况就不同了。\n            ",e("br")," 可以省下很多时间和精力:-)\n            ",e("br")," ",e("br")])])},function(){var t=this,e=t.$createElement;return e("h3",{staticClass:"ui header"},["\n                图书交流小助手",e("br"),"Books Share\n            "])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"ui steps tablet stackable"},[e("div",{staticClass:"step active"},[e("i",{staticClass:"truck icon"})," ",e("div",{staticClass:"content"},[e("div",{staticClass:"title"},["浏览"])," ",e("div",{staticClass:"description"},["查找图书"])])])," ",e("div",{staticClass:"step"},[e("i",{staticClass:"alarm icon"})," ",e("div",{staticClass:"content"},[e("div",{staticClass:"title"},["注册"])," ",e("div",{staticClass:"description"},["注册借书"])])])," ",e("div",{staticClass:"step"},[e("i",{staticClass:"dashboard icon"})," ",e("div",{staticClass:"content"},[e("div",{staticClass:"title"},["贡献"])," ",e("div",{staticClass:"description"},["登记图书"])])])," ",e("div",{staticClass:"step"},[e("i",{staticClass:"comments icon"})," ",e("div",{staticClass:"content"},[e("div",{staticClass:"title"},["分享"])," ",e("div",{staticClass:"description"},["共同进步"])])])])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"ui inverted vertical footer center aligned segment"},[e("div",{staticClass:"ui container"},[e("div",{staticClass:"ui stackable inverted divided equal height stackable grid"},[e("div",{staticClass:"six wide column"},[e("h5",{staticClass:"ui inverted header"},["感谢"])," ",e("div",{staticClass:"ui inverted link list"},[e("a",{staticClass:"item",attrs:{href:"http://vuejs.org/",target:"_blank"}},["Vue.js"])," ",e("a",{staticClass:"item",attrs:{href:"http://www.wilddog.com",target:"_blank"}},["Wilddog"])])])," ",e("div",{staticClass:"six wide column"},[e("h5",{staticClass:"ui inverted header"},["联系我们"])," ",e("div",{staticClass:"ui inverted link list"},[e("a",{staticClass:"item",attrs:{href:"http://github.com/share-book",target:"_blank"}},["Judy(13710711847@163.com)"])," ",e("a",{staticClass:"item",attrs:{href:"http://github.com/lshengjian",target:"_blank"}},["Alex(lsj178@139.com)"])])])])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"example"},[e("div",{staticClass:"ui accordion"},[t._m(0)," ",e("div",{staticClass:"active content"},[e("add-book")])])," ",e("div",{staticClass:"ui divider"})," ",t._m(1)," ",e("div",{staticClass:"ui bottom attached tab segment active",attrs:{"data-tab":"gird"}},[e("p",{staticClass:"ui text"},["\n            Search ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],attrs:{name:"query"},domProps:{value:t._s(t.searchQuery)},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})])," ",e("my-grid",{attrs:{data:t.mybooks,columns:t.gridColumns,"filter-key":t.searchQuery}})])," ",t._m(2)])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",{staticClass:"active title"},[e("i",{staticClass:"dropdown icon"})," 新增图书\n    "])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"ui top attached tabular menu",attrs:{"data-garbage":"true"}},[e("a",{staticClass:"item active",attrs:{"data-tab":"gird"}},["表格模式"])," ",e("a",{staticClass:"item",attrs:{"data-tab":"card"}},["卡片模式"])])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"card","data-garbage":"true"}},[e("div",{staticClass:"demo square ui shape "},[e("div",{staticClass:"sides"},[e("div",{staticClass:"side active"},[e("img",{staticClass:"ui medium image",attrs:{src:"/static/images/stevie.jpg"}})])," ",e("div",{staticClass:"side"},[e("img",{staticClass:"ui medium image",attrs:{src:"/static/images/steve.jpg"}})])])])," ",e("div",{staticClass:"ui  divider"})," ",e("div",{staticClass:"ui ignored icon direction buttons"},[e("div",{staticClass:"ui button",attrs:{"data-animation":"flip",title:"Flip Left","data-direction":"left"}},[e("i",{staticClass:"left long arrow icon"})])," ",e("div",{staticClass:"ui icon button",attrs:{"data-animation":"flip",title:"Flip Right","data-direction":"right"}},[e("i",{staticClass:"right long arrow icon"})])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return t.filteredData.length?e("table",[e("thead",[e("tr",[t._l(t.columns,function(n){return e("th",{class:{active:t.sortKey==n},on:{click:function(e){t.sortBy(n)}}},["\n             "+t._s(t._f("capitalize")(n))+"\n             ",e("span",{staticClass:"arrow",class:t.sortOrders[n]>0?"asc":"dsc"})])})])])," ",e("tbody",[t._l(t.filteredData,function(n){return e("tr",[t._l(t.columns,function(a){return e("td",["\n             "+t._s(n[a])+"\n           "])})])})])]):e("p",["No matches found."])},staticRenderFns:[]}},,,,,,,function(t,e){}]);
//# sourceMappingURL=app.2a2905304b7026189283.js.map